(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),l=a(64),r=a.n(l),c=a(4),i=a(5),o=a(8),m=a(6),u=a(7),h=a(9),p=a(30),d=a.n(p),b=(a(124),a(127),{apiKey:"AIzaSyAw-uZmAJOz-awRxcpt9QNrQi99Y2WHHwQ",authDomain:"react-spas-tvj.firebaseapp.com",databaseURL:"https://react-spas-tvj.firebaseio.com",projectId:"react-spas-tvj",storageBucket:"react-spas-tvj.appspot.com",messagingSenderId:"1029688541435"});d.a.initializeApp(b);new d.a.auth.GoogleAuthProvider,d.a.auth();var y=d.a,g=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return n.a.createElement("div",{className:"container text-center"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-10 col-md-10 col-lg-8 col-xl-7"},n.a.createElement("div",{className:"display-4 text-primary mt-3 mb-2",style:{fontSize:"2.8em"}},"Playlist Manager"),n.a.createElement("p",{className:"lead",style:{fontSize:"1.4em",fontWeight:200}},"This simple app creates playlists, allows people to check in, and picks random users to award giveaways. It's a good example of a Single Page Application which includes connection to a database and routing. It's a practical way to learn ",n.a.createElement("a",{href:"https://reactjs.org/"},"React")," ","with ",n.a.createElement("a",{href:"https://firebase.google.com"},"Firebase"),"."),null==e&&n.a.createElement("span",null,n.a.createElement(h.a,{to:"/register",className:"btn btn-outline-primary mr-2"},"Register"),n.a.createElement(h.a,{to:"/login",className:"btn btn-outline-primary mr-2"},"Log In")),e&&n.a.createElement(h.a,{to:"/playlists",className:"btn btn-primary"},"Playlists"))," "))}}]),t}(s.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userName,a=e.logOutUser;return n.a.createElement("div",{className:"text-center mt-4"},n.a.createElement("span",{className:"text-secondary font-weight-bold pl-1"},"Welcome ",t),",",n.a.createElement(h.a,{to:"/login",className:"font-weight-bold text-primary pl-1",onClick:function(e){return a(e)}},"log out"))}}]),t}(s.Component),v=a(66),E=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.logOutUser;return n.a.createElement("nav",{className:"site-nav family-sans navbar navbar-expand bg-primary navbar-dark higher"},n.a.createElement("div",{className:"container-fluid"},n.a.createElement(h.a,{to:"/",className:"navbar-brand"},n.a.createElement(v.a,{className:"mr-1"})," Playlist Manager"),n.a.createElement("div",{className:"navbar-nav ml-auto"},t&&n.a.createElement(h.a,{className:"nav-item nav-link",to:"/playlists"},"playlists"),!t&&n.a.createElement(h.a,{className:"nav-item nav-link",to:"/login"},"log in"),!t&&n.a.createElement(h.a,{className:"nav-item nav-link",to:"/register"},"register"),t&&n.a.createElement(h.a,{className:"nav-item nav-link",to:"/login",onClick:function(e){return a(e)}},"log out"))))}}]),t}(s.Component),N=a(11),j=a(3),O=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.theMessage;return n.a.createElement("div",{className:"col-12 alert alert-danger px-3"},e)}}]),t}(s.Component),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",errorMessage:null},a.handleChange=a.handleChange.bind(Object(j.a)(Object(j.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(Object(j.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(N.a)({},t,a))}},{key:"handleSubmit",value:function(e){var t=this,a={email:this.state.email,password:this.state.password};e.preventDefault(),y.auth().signInWithEmailAndPassword(a.email,a.password).then(function(){Object(h.c)("/playlists")}).catch(function(e){e.message?t.setState({errorMessage:e.message}):t.setState({errorMessage:null})})}},{key:"render",value:function(){return n.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"font-weight-light mb-3"},"Log in"),n.a.createElement("section",{className:"form-group"},null!==this.state.errorMessage?n.a.createElement(O,{theMessage:this.state.errorMessage}):null,n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"Email"},"Email"),n.a.createElement("input",{required:!0,className:"form-control",type:"email",id:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange})),n.a.createElement("section",{className:"form-group"},n.a.createElement("input",{required:!0,className:"form-control",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange})),n.a.createElement("div",{className:"form-group text-right mb-0"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Log in"))))))))}}]),t}(s.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={displayName:"",email:"",passOne:"",passTwo:"",errorMessage:null},a.handleChange=a.handleChange.bind(Object(j.a)(Object(j.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(Object(j.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=this,a=e.target.name,s=e.target.value;this.setState(Object(N.a)({},a,s),function(){t.state.passOne!==t.state.passTwo?t.setState({errorMessage:"Make sure two password fields match"}):t.setState({errorMessage:null})})}},{key:"handleSubmit",value:function(e){var t=this,a={displayName:this.state.displayName,email:this.state.email,password:this.state.passOne};e.preventDefault(),y.auth().createUserWithEmailAndPassword(a.email,a.password).then(function(){t.props.registerUser(a.displayName)}).catch(function(e){e.message?t.setState({errorMessage:e.message}):t.setState({errorMessage:null})})}},{key:"render",value:function(){return n.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-lg-8"},n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"font-weight-light mb-3"},"Register"),n.a.createElement("div",{className:"form-row"},null!==this.state.errorMessage?n.a.createElement(O,{theMessage:this.state.errorMessage}):null,n.a.createElement("section",{className:"col-sm-12 form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"displayName"},"Display Name"),n.a.createElement("input",{className:"form-control",type:"text",id:"displayName",placeholder:"Display Name",name:"displayName",required:!0,value:this.state.displayName,onChange:this.handleChange}))),n.a.createElement("section",{className:"form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"email"},"Email"),n.a.createElement("input",{className:"form-control",type:"email",id:"email",placeholder:"Email Address",required:!0,name:"email",value:this.state.email,onChange:this.handleChange})),n.a.createElement("div",{className:"form-row"},n.a.createElement("section",{className:"col-sm-6 form-group"},n.a.createElement("input",{className:"form-control",type:"password",name:"passOne",placeholder:"Password",value:this.state.passOne,onChange:this.handleChange})),n.a.createElement("section",{className:"col-sm-6 form-group"},n.a.createElement("input",{className:"form-control",type:"password",required:!0,name:"passTwo",placeholder:"Repeat Password",value:this.state.passTwo,onChange:this.handleChange}))),n.a.createElement("div",{className:"form-group text-right mb-0"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Register"))))))))}}]),t}(s.Component),C=a(19),R=a(29),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).deletePlaylist=function(e,t){e.preventDefault();try{y.database().ref("playlists/".concat(a.props.userID,"/").concat(t)).remove()}catch(e){a.setState({errorMessage:e})}},a.state={errorMessage:null},a.deleteMetting=a.deletePlaylist.bind(Object(j.a)(Object(j.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.playlists.map(function(t){return n.a.createElement("div",{className:"container",key:t.playlistID},n.a.createElement("section",{className:"row border-top clearfix pt-2 pb-2"},n.a.createElement("div",{className:"col-10 float-left text-left"},n.a.createElement("div",null,t.playlistName)),n.a.createElement("div",{className:"col-2 float-right"},n.a.createElement("div",{className:"btn-group float-right border",role:"group"},n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary mr-1",title:"Check In",onClick:function(){return Object(h.c)("/checkin/".concat(e.props.userID,"/").concat(t.playlistID))}},n.a.createElement(R.c,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary mr-1",title:"URLs List",onClick:function(){return Object(h.c)("/URLs/".concat(e.props.userID,"/").concat(t.playlistID))}},n.a.createElement(C.a,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Delete Playlist",onClick:function(a){return e.deletePlaylist(a,t.playlistID)}},n.a.createElement(C.d,null))))))});return n.a.createElement("div",null,null!==this.state.errorMessage?n.a.createElement(O,{theMessage:this.state.errorMessage}):null,t)}}]),t}(s.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={playlistName:""},a.handleChange=a.handleChange.bind(Object(j.a)(Object(j.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(Object(j.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(N.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addPlaylist(this.state.playlistName),this.setState({playlistName:""})}},{key:"render",value:function(){return n.a.createElement("div",{className:"container mt-4"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-8 text-center"},n.a.createElement("h1",{className:"font-weight-light"},"Add a Playlist"),n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body text-center"},n.a.createElement("form",{className:"formgroup",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"input-group input-group-lg"},n.a.createElement("input",{type:"text",className:"form-control",name:"playlistName",placeholder:"Playlist name","aria-describedby":"buttonAdd",value:this.state.playlistName,onChange:this.handleChange}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{type:"submit",className:"btn btn-sm btn-info",id:"buttonAdd"},"+"))))))),this.props.playlists&&this.props.playlists.length?n.a.createElement("div",{className:"col-11 col-md-6 text-center"},n.a.createElement("div",{className:"card border-top-0 rounded-0"},n.a.createElement("div",{className:"card-body py-2"},n.a.createElement("h4",{className:"card-title font-weight-light m-0"},"Your Playlists")),n.a.createElement("div",{className:"div-group div-group-flush"},n.a.createElement(D,{playlists:this.props.playlists,userID:this.props.userID})))):null))}}]),t}(s.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={displayName:"",email:""},a.handleChange=a.handleChange.bind(Object(j.a)(Object(j.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(Object(j.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(N.a)({},t,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),y.database().ref("playlists/".concat(this.props.userID,"/").concat(this.props.playlistID,"/URLs")).push({URLName:this.state.displayName,URLEmail:this.state.email,star:!1}),Object(h.c)("/URLs/".concat(this.props.userID,"/").concat(this.props.playlistID))}},{key:"render",value:function(){return n.a.createElement("form",{className:"mt-3",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"card bg-light"},n.a.createElement("div",{className:"card-body"},n.a.createElement("h3",{className:"font-weight-light mb-3"},"Check in"),n.a.createElement("section",{className:"form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"displayName"},"Name"),n.a.createElement("input",{required:!0,className:"form-control",type:"text",id:"displayName",name:"displayName",placeholder:"Name",value:this.state.displayName,onChange:this.handleChange})),n.a.createElement("section",{className:"form-group"},n.a.createElement("label",{className:"form-control-label sr-only",htmlFor:"Email"},"Email"),n.a.createElement("input",{required:!0,className:"form-control",type:"email",id:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange})),n.a.createElement("div",{className:"form-group text-right mb-0"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Check in"))))))))}}]),t}(s.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).deleteURL=function(e,t,s){e.preventDefault();var n=a.props.adminUser;try{y.database().ref("playlists/".concat(n,"/").concat(t,"/URLs/").concat(s)).remove()}catch(e){a.setState({errorMessage:"Error: failed to delete URL from URLs list."})}},a.toggleStar=function(e,t,s,n){e.preventDefault();var l=a.props.adminUser;try{var r=y.database().ref("playlists/".concat(l,"/").concat(s,"/URLs/").concat(n,"/star"));void 0===r?r.set(!0):r.set(!t)}catch(e){a.setState({errorMessage:"Error: failed to set star status for URL in URLs list."})}},a.state={errorMessage:null},a.deleteURL=a.deleteURL.bind(Object(j.a)(Object(j.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.adminUser===this.props.userID,a=this.props.URLs.map(function(a){return n.a.createElement("div",{key:a.URLID,className:"col-8 col-sm-6 col-md-4 col-lg-3 mb-2 p-0 px-1"},n.a.createElement("div",{className:"card "},n.a.createElement("div",{className:"card-body px-3 py-2 d-flex align-items-center "+(t?"":"justify-content-center")},t&&n.a.createElement("div",{className:"btn-group pr-2"},n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",title:"Delete URL",onClick:function(t){return e.deleteURL(t,e.props.playlistID,a.URLID)}},n.a.createElement(C.d,null)),n.a.createElement("a",{href:"mailto:".concat(a.URLEmail),className:"btn btn-sm btn-outline-secondary",title:"Mail URL"},n.a.createElement(C.b,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-secondary"+(a.star?" btn-info":""),title:"Star URL",onClick:function(t){return e.toggleStar(t,a.star,e.props.playlistID,a.URLID)}},n.a.createElement(C.c,null))),n.a.createElement("div",null,a.URLName))))});return n.a.createElement("div",{className:"row justify-content-center"},a)}}]),t}(s.Component),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={searchQuery:"",allURLs:[],displayURLs:[],playlistName:""},a.handleChange=a.handleChange.bind(Object(j.a)(Object(j.a)(a))),a.resetQuery=a.resetQuery.bind(Object(j.a)(Object(j.a)(a))),a.chooseRandom=a.chooseRandom.bind(Object(j.a)(Object(j.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.database().ref("playlists/".concat(this.props.userID,"/").concat(this.props.playlistID)).on("value",function(t){var a=t.val().playlistName;e.setState({playlistName:a})}),y.database().ref("playlists/".concat(this.props.userID,"/").concat(this.props.playlistID,"/URLs")).on("value",function(t){var a=t.val(),s=[];for(var n in a)s.push({URLID:n,URLName:a[n].URLName,URLEmail:a[n].URLEmail,star:a[n].star});e.setState({displayURLs:s,allURLs:s})})}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(N.a)({},t,a))}},{key:"chooseRandom",value:function(){var e=Math.floor(Math.random()*this.state.allURLs.length);void 0!==e&&(this.resetQuery(),this.setState({displayURLs:[this.state.allURLs[e]]}))}},{key:"resetQuery",value:function(){this.setState({displayURLs:this.state.allURLs,searchQuery:""})}},{key:"render",value:function(){var e=this,t=this.state.displayURLs.filter(function(t){return t.URLName.toLowerCase().match(e.state.searchQuery.toLowerCase())&&!0});return n.a.createElement("div",{className:"container mt-4"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-8"},n.a.createElement("h4",{className:"text-center font-weight-bolder"},this.state.playlistName," URLs"),n.a.createElement("div",{className:"card bg-light mb-4"},n.a.createElement("div",{className:"card-body text-center"},n.a.createElement("div",{className:"input-group input-group-lg"},n.a.createElement("input",{type:"text",name:"searchQuery",value:this.state.searchQuery,placeholder:"Search URLs",className:"form-control",onChange:this.handleChange}),n.a.createElement("div",{className:"input-group-append"},n.a.createElement("button",{className:"btn btn-sm btn-outline-info ",title:"Pick a random URL",onClick:function(){return e.chooseRandom()}},n.a.createElement(R.a,null)),n.a.createElement("button",{className:"btn btn-sm btn-outline-info ",title:"Reset Search",onClick:function(){return e.resetQuery()}},n.a.createElement(R.b,null)))))))),n.a.createElement(L,{userID:this.props.userID,playlistID:this.props.playlistID,adminUser:this.props.adminUser,URLs:t}))}}]),t}(s.Component),M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(m.a)(t).call(this))).registerUser=function(t){y.auth().onAuthStateChanged(function(a){a.updateProfile({displayName:t}).then(function(){e.setState({user:a,displayName:a.displayName,userID:a.uid}),Object(h.c)("/playlists")})})},e.logOutUser=function(t){t.preventDefault(),e.setState({user:null,displayName:null,userID:null,playlists:[]}),y.auth().signOut().then(function(){Object(h.c)("/login")})},e.addPlaylist=function(t){y.database().ref("playlists/".concat(e.state.user.uid)).push({playlistName:t})},e.state={user:null,displayName:null,userID:null},e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.auth().onAuthStateChanged(function(t){t?(e.setState({user:t,displayName:t.displayName,userID:t.uid}),y.database().ref("playlists/"+t.uid).on("value",function(t){var a=t.val(),s=[];for(var n in a)s.push({playlistID:n,playlistName:a[n].playlistName});e.setState({playlists:s,howManyPlaylists:s.length})})):e.setState({user:null})})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(E,{user:this.state.user,logOutUser:this.logOutUser}),this.state.user&&n.a.createElement(f,{userName:this.state.displayName,logOutUser:this.logOutUser}),n.a.createElement(h.b,null,n.a.createElement(g,{path:"/",user:this.state.user}),n.a.createElement(U,{path:"/login"}),n.a.createElement(S,{path:"/playlists",playlists:this.state.playlists,addPlaylist:this.addPlaylist,userID:this.state.userID}),n.a.createElement(I,{path:"/URLs/:userID/:playlistID",adminUser:this.state.userID,userID:this.state.userID}),n.a.createElement(k,{path:"/checkin/:userId/:playlistID",userID:this.state.userID}),n.a.createElement(w,{path:"/register",registerUser:this.registerUser})))}}]),t}(s.Component);a(129),a(131),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},67:function(e,t,a){e.exports=a(133)}},[[67,2,1]]]);
//# sourceMappingURL=main.2c70b08a.chunk.js.map